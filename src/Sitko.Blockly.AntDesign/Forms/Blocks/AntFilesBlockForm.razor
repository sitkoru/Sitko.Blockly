@using Sitko.Core.App.Collections
@using Sitko.Core.Storage
@inherits Sitko.Blockly.Blazor.Forms.Blocks.FilesBlockForm<AntDesignBlocklyFormOptions>
@if (FormOptions.Storage is not null)
{
    <AntBlockFormItem BlockForm="this">
        <AntStorageFilesInput
            TValue="ValueCollection<StorageItem>"
            Storage="FormOptions.Storage"
            ContentTypes="@FormOptions.ImagesOptions.AllowedTypes"
            UploadPath="@FormOptions.ImagesOptions.UploadPath"
            MaxFileSize="@FormOptions.ImagesOptions.MaxFileSize"
            MaxFiles="@FormOptions.ImagesOptions.MaxAllowedFiles"
            GenerateMetadata="FormOptions.ImagesOptions.GenerateMetadata"
            UploadText="@LocalizationProvider["Upload"]"
            RemoveText="@LocalizationProvider["Remove"]"
            LeftText="@LocalizationProvider["Move left"]"
            RightText="@LocalizationProvider["Move right"]"
            @bind-Value="Block.Files">
        </AntStorageFilesInput>
    </AntBlockFormItem>
}
else
{
    <AntBlockFormErrorComponent Error="@LocalizationProvider["Storage is not configured in form options"]"></AntBlockFormErrorComponent>
}
